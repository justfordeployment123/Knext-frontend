{"ast":null,"code":"import _objectSpread from\"/Users/muhammadfizantariq/Downloads/Knext_2/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useApp}from'../context/AppContext';import{isAuthenticated}from'../services/authService';import CoachingIQDrawer from'../components/CoachingIQDrawer';import CoachKReactionPanel from'../components/CoachKReactionPanel';import'./TeamIQPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TeamIQPage=()=>{var _teamState$roster,_selectedPlayer$badge,_selectedPlayer$flags;const navigate=useNavigate();const{coachProfile,coachingBias,teamState,setTeamState,addCoachKMessage}=useApp();const[activeView,setActiveView]=useState('roster');// roster or depth\nconst[selectedPlayer,setSelectedPlayer]=useState(null);const[expandedPlayerTab,setExpandedPlayerTab]=useState('kpi');// kpi, financial, performance, notes\nconst[draggedPlayer,setDraggedPlayer]=useState(null);const[depthChartState,setDepthChartState]=useState({});// Sandbox state for depth chart\nconst[showTeamEvaluation,setShowTeamEvaluation]=useState(false);const[showDrawer,setShowDrawer]=useState(false);const[sortConfig,setSortConfig]=useState({key:null,direction:'asc'});const[editingFinancial,setEditingFinancial]=useState(null);// { playerId, field: 'scholarship' | 'nil' }\nconst[tempFinancialValue,setTempFinancialValue]=useState('');const[sandboxMetrics,setSandboxMetrics]=useState(null);// Metrics for sandbox lineup\nconst[dragOverPosition,setDragOverPosition]=useState(null);const[teamMetrics,setTeamMetrics]=useState({teamKPI:0,teamKPIBand:'F',systemFit:0,scholarshipUsage:0,scholarshipSlots:0,nilUtilized:0,confidenceAvg:0});const[showRecruitingModal,setShowRecruitingModal]=useState(false);// Calculate Team KPI Band (A-F)\nconst getTeamKPIBand=kpi=>{if(kpi>=90)return'A';if(kpi>=80)return'B';if(kpi>=70)return'C';if(kpi>=60)return'D';return'F';};useEffect(()=>{// Calculate team metrics\nif(teamState.roster&&teamState.roster.length>0){const avgKPI=teamState.roster.reduce((sum,p)=>sum+(p.final_kpi||p.kpi||0),0)/teamState.roster.length;const avgFit=teamState.roster.reduce((sum,p)=>sum+(p.fit||0),0)/teamState.roster.length;const avgConf=teamState.roster.reduce((sum,p)=>sum+(p.confidence||0),0)/teamState.roster.length;// Count scholarship slots (players with scholarship > 0)\nconst scholarshipSlots=teamState.roster.filter(p=>parseFloat(p.scholarship_suggestion||p.scholarship||0)>0).length;const scholarshipCap=(coachingBias===null||coachingBias===void 0?void 0:coachingBias.scholarshipCap)||12;const totalNIL=teamState.roster.reduce((sum,p)=>sum+parseFloat(p.nil_value_suggestion||p.nil||0),0);const maxNIL=(coachingBias===null||coachingBias===void 0?void 0:coachingBias.nilPool)||50000;setTeamMetrics({teamKPI:parseFloat(avgKPI.toFixed(1)),teamKPIBand:getTeamKPIBand(avgKPI),systemFit:Math.round(avgFit),scholarshipUsage:scholarshipSlots,scholarshipSlots:scholarshipSlots,nilUtilized:Math.round(totalNIL/maxNIL*100),confidenceAvg:Math.round(avgConf)});}else{setTeamMetrics({teamKPI:0,teamKPIBand:'F',systemFit:0,scholarshipUsage:0,scholarshipSlots:0,nilUtilized:0,confidenceAvg:0});}},[teamState.roster,coachingBias]);const handleRemovePlayer=playerId=>{if(window.confirm('Remove this player from roster?')){console.log('[LOGIC HOOK: handleRemovePlayer] Removing player:',playerId);setTeamState(prev=>_objectSpread(_objectSpread({},prev),{},{roster:prev.roster.filter(p=>p.id!==playerId)}));setSelectedPlayer(null);}};const handleSavePlayerChanges=()=>{if(selectedPlayer){console.log('[LOGIC HOOK: handleSavePlayerChanges] Saving changes for player:',selectedPlayer);setTeamState(prev=>_objectSpread(_objectSpread({},prev),{},{roster:prev.roster.map(p=>p.id===selectedPlayer.id?selectedPlayer:p)}));// Recalculate financial summary\nconst totalScholarship=teamState.roster.reduce((sum,p)=>{const playerScholarship=p.id===selectedPlayer.id?parseFloat(selectedPlayer.scholarship_slot||selectedPlayer.scholarship||0):parseFloat(p.scholarship_slot||p.scholarship||0);return sum+playerScholarship;},0);const totalNIL=teamState.roster.reduce((sum,p)=>{const playerNIL=p.id===selectedPlayer.id?parseFloat(selectedPlayer.nil_value_suggestion||selectedPlayer.nil||0):parseFloat(p.nil_value_suggestion||p.nil||0);return sum+playerNIL;},0);alert('✅ Player changes saved');}};const handleSort=key=>{let direction='asc';if(sortConfig.key===key&&sortConfig.direction==='asc'){direction='desc';}setSortConfig({key,direction});};const handleFinancialClick=(e,player,field)=>{e.stopPropagation();setEditingFinancial({playerId:player.id,field});if(field==='scholarship'){setTempFinancialValue(player.scholarship_slot||player.scholarship||'0.0');}else{setTempFinancialValue(player.nil_value_suggestion||player.nil||'0');}};const handleFinancialSave=(playerId,field)=>{const currentRoster=teamState.roster&&teamState.roster.length>0?teamState.roster:sampleRoster;const player=currentRoster.find(p=>p.id===playerId);if(!player)return;const updatedPlayer=_objectSpread({},player);if(field==='scholarship'){const value=parseFloat(tempFinancialValue)||0;updatedPlayer.scholarship_slot=Math.min(Math.max(value,0),1.0);updatedPlayer.scholarship=updatedPlayer.scholarship_slot*((coachingBias===null||coachingBias===void 0?void 0:coachingBias.scholarshipCap)||12)*10000;}else{updatedPlayer.nil_value_suggestion=parseFloat(tempFinancialValue)||0;updatedPlayer.nil=updatedPlayer.nil_value_suggestion;}setTeamState(prev=>_objectSpread(_objectSpread({},prev),{},{roster:prev.roster.map(p=>p.id===playerId?updatedPlayer:p)}));// Recalculate and show Coach K™ tip if near scholarship cap\nconst totalSlots=teamState.roster.reduce((sum,p)=>{const slot=p.id===playerId?updatedPlayer.scholarship_slot:parseFloat(p.scholarship_slot||(p.scholarship?p.scholarship/(((coachingBias===null||coachingBias===void 0?void 0:coachingBias.scholarshipCap)||12)*10000):0));return sum+slot;},0);const scholarshipCap=(coachingBias===null||coachingBias===void 0?void 0:coachingBias.scholarshipCap)||12;const nearCap=totalSlots>=scholarshipCap*0.9;if(nearCap){setTimeout(()=>{addCoachKMessage({id:'TIQ_FINANCIAL_TIP',speaker:'Coach K',message:\"You're near your scholarship cap \\u2014 reallocating here affects your financial summary.\",type:'warning'});},500);}// Dispatch financial edit event for Coach K™\nwindow.dispatchEvent(new CustomEvent('teamFinancialEdit',{detail:{field:field,nearCap:nearCap}}));setEditingFinancial(null);setTempFinancialValue('');};const handleFinancialCancel=()=>{setEditingFinancial(null);setTempFinancialValue('');};const handleViewInPlayerIQ=()=>{if(selectedPlayer){navigate('/player-iq',{state:{playerData:selectedPlayer}});}};const handleRemoveToRecruiting=()=>{if(selectedPlayer&&window.confirm(\"Move \".concat(selectedPlayer.name,\" to Recruiting Board (Released)?\"))){console.log('[LOGIC HOOK: handleRemoveToRecruiting] Moving player to Recruiting Board:',selectedPlayer.id);// Dispatch roster change event for Coach K™\nwindow.dispatchEvent(new CustomEvent('teamRosterChange',{detail:{trigger:'roster_remove',context:{playerName:selectedPlayer.name,playerId:selectedPlayer.id}}}));setTeamState(prev=>_objectSpread(_objectSpread({},prev),{},{roster:prev.roster.filter(p=>p.id!==selectedPlayer.id)}));setSelectedPlayer(null);alert(\"\\u2705 \".concat(selectedPlayer.name,\" moved to Recruiting Board\"));}};// Sample data for Phase 1 demonstration\nconst sampleRoster=teamState.roster&&teamState.roster.length>0?teamState.roster:[{id:'1',name:'J. Murray',position:'PG',age:24,kpi:85,fit:81,confidence:84,scholarship:12000,nil:7200,eligibility:'Active',flags:[]},{id:'2',name:'M. Johnson',position:'SG',age:22,kpi:78,fit:75,confidence:82,scholarship:10000,nil:5400,eligibility:'Active',flags:[]},{id:'3',name:'T. Williams',position:'SF',age:21,kpi:82,fit:88,confidence:79,scholarship:11000,nil:6800,eligibility:'Active',flags:[]},{id:'4',name:'C. Davis',position:'PF',age:23,kpi:76,fit:72,confidence:77,scholarship:9500,nil:4800,eligibility:'Active',flags:[]}];const displayRoster=teamState.roster&&teamState.roster.length>0?teamState.roster:sampleRoster;// Sort roster based on sortConfig\nconst sortedRoster=[...displayRoster].sort((a,b)=>{if(!sortConfig.key)return 0;let aValue,bValue;switch(sortConfig.key){case'kpi':aValue=a.final_kpi||a.kpi||0;bValue=b.final_kpi||b.kpi||0;break;case'fit':aValue=a.fit||0;bValue=b.fit||0;break;case'confidence':aValue=a.confidence||0;bValue=b.confidence||0;break;case'scholarship':aValue=parseFloat(a.scholarship_slot||a.scholarship||0);bValue=parseFloat(b.scholarship_slot||b.scholarship||0);break;default:return 0;}if(sortConfig.direction==='asc'){return aValue>bValue?1:-1;}else{return aValue<bValue?1:-1;}});// Recalculate team metrics for sandbox lineup\nconst recalcSandboxMetrics=lineupState=>{const allPlayers=Object.values(lineupState).flat();if(allPlayers.length===0){setSandboxMetrics(null);return;}const avgKPI=allPlayers.reduce((sum,p)=>sum+(p.final_kpi||p.kpi||0),0)/allPlayers.length;const avgFit=allPlayers.reduce((sum,p)=>sum+(p.fit||0),0)/allPlayers.length;const avgConf=allPlayers.reduce((sum,p)=>sum+(p.confidence||0),0)/allPlayers.length;const newMetrics={teamKPI:parseFloat(avgKPI.toFixed(1)),teamKPIBand:getTeamKPIBand(avgKPI),systemFit:Math.round(avgFit),confidenceAvg:Math.round(avgConf)};setSandboxMetrics(newMetrics);// Update header summary if sandbox is active\nif(Object.keys(lineupState).length>0){const deltaKPI=newMetrics.teamKPI-teamMetrics.teamKPI;if(Math.abs(deltaKPI)>0.1){setTimeout(()=>{addCoachKMessage({id:'TIQ_DEPTH_CHART_UPDATE',speaker:'Coach K',message:\"Roster adjusted \\u2014 Team KPI \".concat(deltaKPI>=0?'+':'').concat(deltaKPI.toFixed(1),\".\"),type:'info'});},300);}}};const handleDragStart=(e,player,currentPosition)=>{setDraggedPlayer({player,currentPosition});e.dataTransfer.effectAllowed='move';e.dataTransfer.setData('text/plain',player.id);};const handleDragOver=(e,position)=>{e.preventDefault();e.dataTransfer.dropEffect='move';setDragOverPosition(position);};const handleDragLeave=()=>{setDragOverPosition(null);};const handleDrop=(e,targetPosition)=>{e.preventDefault();setDragOverPosition(null);if(draggedPlayer){const{player,currentPosition}=draggedPlayer;console.log('[LOGIC HOOK: handleDrop] Moving player to position:',{playerId:player.id,playerName:player.name,from:currentPosition,to:targetPosition});// Remove from current position\nconst newState=_objectSpread({},depthChartState);if(currentPosition&&newState[currentPosition]){newState[currentPosition]=newState[currentPosition].filter(p=>p.id!==player.id);}// Add to target position\nif(!newState[targetPosition]){newState[targetPosition]=[];}newState[targetPosition]=[...newState[targetPosition],player];setDepthChartState(newState);recalcSandboxMetrics(newState);// Dispatch depth swap event for Coach K™\nwindow.dispatchEvent(new CustomEvent('teamDepthSwap',{detail:{fromPosition:currentPosition,toPosition:targetPosition,playerName:player.name}}));setDraggedPlayer(null);}};const getPlayersForPosition=position=>{// Get players from sandbox state or roster\nif(depthChartState[position]&&depthChartState[position].length>0){return depthChartState[position];}// Fallback to roster players matching position\nreturn displayRoster.filter(p=>{if(position==='PG')return p.position==='PG';if(position==='CG')return p.position==='SG';if(position==='Wing')return p.position==='SF'||p.position==='SG';if(position==='Forward')return p.position==='PF'||p.position==='SF';if(position==='Big')return p.position==='C'||p.position==='PF';return false;});};const getBenchPlayers=position=>{const primaryPlayers=getPlayersForPosition(position);const allPositionPlayers=displayRoster.filter(p=>{if(position==='PG')return p.position==='PG';if(position==='CG')return p.position==='SG';if(position==='Wing')return p.position==='SF'||p.position==='SG';if(position==='Forward')return p.position==='PF'||p.position==='SF';if(position==='Big')return p.position==='C'||p.position==='PF';return false;}).sort((a,b)=>(b.fit||0)-(a.fit||0));// Return up to 3 bench players (excluding primary)\nconst primaryIds=primaryPlayers.map(p=>p.id);return allPositionPlayers.filter(p=>!primaryIds.includes(p.id)).slice(0,3);};const calculatePositionWeight=(position,lineupState)=>{const players=lineupState[position]||[];if(players.length===0)return 0;const totalKPI=players.reduce((sum,p)=>sum+(p.final_kpi||p.kpi||0),0);const allPlayers=Object.values(lineupState).flat();const totalTeamKPI=allPlayers.reduce((sum,p)=>sum+(p.final_kpi||p.kpi||0),0);if(totalTeamKPI===0)return 0;return totalKPI/totalTeamKPI*100;};const generateTeamReport=()=>{const currentMetrics=sandboxMetrics||teamMetrics;const lineupPlayers=Object.values(depthChartState).flat().length>0?Object.values(depthChartState).flat():displayRoster;// Generate narrative summary based on metrics\nconst tier=currentMetrics.teamKPI>=80?'Contender':currentMetrics.teamKPI>=70?'Competitive':'Building';const summary=\"Balanced roster built around guard play and perimeter spacing. Elite shooting; limited rim protection and defensive rebounding below divisional average. \".concat(tier==='Contender'?'Tournament-caliber but undersized against physical teams.':'Needs depth to compete at highest level.');const coachKComment=currentMetrics.systemFit>=80?\"Offense grades Top-15 for your level \\u2014 defense still mid-tier. Add a rim protector to contend.\":\"System alignment at \".concat(currentMetrics.systemFit,\"% \\u2014 consider adjusting Coaching IQ weights or adding position-specific talent.\");const improvementPath=\"Add forward \\u2265 82 KPI \\xB7 boost defensive cluster +5 \\xB7 shift bias +3 toward defense.\";const scholarshipSlots=teamMetrics.scholarshipSlots;const scholarshipCap=(coachingBias===null||coachingBias===void 0?void 0:coachingBias.scholarshipCap)||12;const remainingSlots=scholarshipCap-scholarshipSlots;const remainingBudget=(remainingSlots*10000).toLocaleString();const nilUtilized=teamMetrics.nilUtilized;const nilUnused=100-nilUtilized;return{division:(coachProfile===null||coachProfile===void 0?void 0:coachProfile.division)||'USCAA',teamKPI:currentMetrics.teamKPI,fitPercent:currentMetrics.systemFit,confidenceAvg:currentMetrics.confidenceAvg,tier:tier,summary:summary,coachKComment:coachKComment,improvementPath:improvementPath,resources:{scholarshipSlots:\"\".concat(remainingSlots.toFixed(1),\" scholarship slots\"),budget:\"$\".concat(remainingBudget,\" budget\"),nilUnused:\"\".concat(nilUnused,\"% NIL pool unused\")}};};const handleEvaluateTeam=()=>{console.log('[LOGIC HOOK: handleEvaluateTeam] Running team evaluation');setShowTeamEvaluation(true);};const handleRunPrediXt=()=>{const lineupPlayers=Object.values(depthChartState).flat().length>0?Object.values(depthChartState).flat():displayRoster;console.log('[LOGIC HOOK: handleRunPrediXt] Running PrediXt with current lineup:',lineupPlayers);addCoachKMessage({id:'TIQ_PREDIXT_START',speaker:'Coach K',message:'Opening PrediXt workspace with current lineup...',type:'info'});// Dispatch PrediXt run event for Coach K™\nwindow.dispatchEvent(new CustomEvent('teamPrediXtRun',{detail:{sandbox:true,playerCount:lineupPlayers.length,simulationType:'single'}}));navigate('/predixt',{state:{lineup:lineupPlayers,sandbox:true}});};const handleRunSeasonProjection=()=>{const lineupPlayers=Object.values(depthChartState).flat().length>0?Object.values(depthChartState).flat():displayRoster;console.log('[LOGIC HOOK: handleRunSeasonProjection] Running season projection:',lineupPlayers);addCoachKMessage({id:'TIQ_SEASON_PROJECTION',speaker:'Coach K',message:'Scenario projection running — using sandbox lineup.',type:'info'});// Dispatch scenario projection event for Coach K™\nwindow.dispatchEvent(new CustomEvent('teamPrediXtRun',{detail:{sandbox:true,playerCount:lineupPlayers.length,simulationType:'scenario',winProb:65,// Mock data\nopponent:'UNLV'// Mock data\n}}));// TODO: Open PrediXt Scenario Projection overlay\nalert('Season Projection feature coming soon. This will run a full-season simulation using the sandbox roster.');};const handleApplyToRoster=()=>{if(Object.keys(depthChartState).length===0){alert('No changes to apply. Make lineup adjustments first.');return;}if(window.confirm('Apply current sandbox lineup as official roster? This will lock the roster and sync across all modules.')){const lineupPlayers=Object.values(depthChartState).flat();console.log('[LOGIC HOOK: handleApplyToRoster] Applying sandbox lineup to roster:',lineupPlayers);setTeamState(prev=>_objectSpread(_objectSpread({},prev),{},{roster:lineupPlayers}));// Clear sandbox state\nsetDepthChartState({});setSandboxMetrics(null);addCoachKMessage({id:'TIQ_ROSTER_LOCKED',speaker:'Coach K',message:'Roster locked · PrediXt engine will refresh overnight.',type:'success'});// Dispatch roster apply event for Coach K™\nwindow.dispatchEvent(new CustomEvent('teamRosterApply'));alert('✅ Lineup applied to roster');}};const handleShowMatchingRecruits=()=>{const report=generateTeamReport();// Navigate to Recruiting IQ with filters for needed roles\nnavigate('/recruiting-iq',{state:{filters:{minKPI:82,position:'PF',needs:'rim protection'}}});};const handleSaveReport=()=>{const report=generateTeamReport();console.log('[LOGIC HOOK: handleSaveReport] Saving team evaluation:',report);// TODO: Write team_evaluation object to DB\nalert('✅ Team evaluation report saved');setShowTeamEvaluation(false);};// Simple direct handlers - no useCallback to avoid any closure issues\nconst handleViewChange=view=>{console.log('[LOGIC HOOK] Switching view to:',view,'current:',activeView);if(activeView!==view){setActiveView(view);}};useEffect(()=>{if(!isAuthenticated()||!coachProfile){navigate('/login');return;}// Listen for Coaching IQ drawer open event\nconst handleOpenDrawer=()=>{setShowDrawer(true);};window.addEventListener('openCoachingIQDrawer',handleOpenDrawer);return()=>{window.removeEventListener('openCoachingIQDrawer',handleOpenDrawer);};},[navigate,coachProfile]);const handleContextClick=field=>{if(field==='system'){const event=new CustomEvent('openCoachingIQDrawer');window.dispatchEvent(event);setShowDrawer(true);}else if(field==='roster'){// Scroll to roster table or ensure roster view is active\nsetActiveView('roster');}};if(!isAuthenticated()||!coachProfile){return null;}return/*#__PURE__*/_jsxs(\"div\",{className:\"team-iq-page\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"team-iq-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-main-bar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"header-title\",children:\"TEAM IQ\\u2122 DASHBOARD\"}),/*#__PURE__*/_jsx(\"p\",{className:\"header-subtitle\",children:\"Aggregate roster intelligence \\xB7 system readiness \\xB7 resource balance.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"context-line\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"context-field clickable\",onClick:()=>handleContextClick('team'),title:\"Team Profile\",children:[\"Team: \",(coachProfile===null||coachProfile===void 0?void 0:coachProfile.team)||'Not Set']}),/*#__PURE__*/_jsx(\"span\",{className:\"context-divider\",children:\"\\xB7\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"context-field clickable\",onClick:()=>handleContextClick('division'),title:\"Division\",children:[\"Division: \",(coachProfile===null||coachProfile===void 0?void 0:coachProfile.division)||'Not Set']}),/*#__PURE__*/_jsx(\"span\",{className:\"context-divider\",children:\"\\xB7\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"context-field clickable\",onClick:()=>handleContextClick('system'),title:\"Open Coaching IQ\\u2122\",children:[\"System: \",(coachingBias===null||coachingBias===void 0?void 0:coachingBias.offensiveSystem)||'Not Set',\" / \",(coachingBias===null||coachingBias===void 0?void 0:coachingBias.defensiveSystem)||'Not Set']}),/*#__PURE__*/_jsx(\"span\",{className:\"context-divider\",children:\"\\xB7\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"context-field clickable\",onClick:()=>handleContextClick('roster'),title:\"View Roster\",children:[\"Roster: \",((_teamState$roster=teamState.roster)===null||_teamState$roster===void 0?void 0:_teamState$roster.length)||0,\" Players\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"header-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"view-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"view-tab \".concat(activeView==='roster'?'active':''),onClick:()=>handleViewChange('roster'),children:\"Roster View\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"view-tab \".concat(activeView==='depth'?'active':''),onClick:()=>handleViewChange('depth'),children:\"Depth Chart View\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-right\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"action-btn-icon\",onClick:()=>{console.log('[LOGIC HOOK] Opening Coaching IQ Drawer from Team IQ header');const event=new CustomEvent('openCoachingIQDrawer');window.dispatchEvent(event);setShowDrawer(true);},title:\"Open Coaching IQ\\u2122\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon-emoji\",children:\"\\uD83E\\uDDE0\"}),/*#__PURE__*/_jsx(\"span\",{className:\"action-label\",children:\"Coaching IQ\\u2122\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"action-btn-icon\",onClick:()=>{console.log('[LOGIC HOOK: handleAddFromRecruiting] Opening Add from Recruiting Board modal');setShowRecruitingModal(true);},title:\"Add from Recruiting Board\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon-emoji\",children:\"\\uD83D\\uDCCB\"}),/*#__PURE__*/_jsx(\"span\",{className:\"action-label\",children:\"Add from Recruiting Board\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"action-btn-icon\",onClick:()=>navigate('/office'),title:\"Return to Office\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon-emoji\",children:\"\\uD83C\\uDFE0\"}),/*#__PURE__*/_jsx(\"span\",{className:\"action-label\",children:\"Return to Office\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-line\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"summary-label\",children:\"Team KPI:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"summary-value kpi-band-\".concat(teamMetrics.teamKPIBand.toLowerCase()),title:\"Off / Def / Core breakdown\",children:[teamMetrics.teamKPI,\" (\",teamMetrics.teamKPIBand,\"-Band)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"summary-label\",children:\"System Fit %:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"summary-value\",children:[teamMetrics.systemFit,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"summary-label\",children:\"Scholarship Usage:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"summary-value\",children:[teamMetrics.scholarshipSlots,\" / \",(coachingBias===null||coachingBias===void 0?void 0:coachingBias.scholarshipCap)||12]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"summary-label\",children:\"NIL Pool Utilized %:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"summary-value\",children:[teamMetrics.nilUtilized,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"summary-label\",children:\"Confidence Avg %:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"summary-value\",children:[teamMetrics.confidenceAvg,\"%\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"team-iq-content\",children:[activeView==='roster'&&/*#__PURE__*/_jsx(\"div\",{className:\"roster-view\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"roster-table-container\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"roster-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"th\",{className:\"sortable\",onClick:()=>handleSort('name'),children:[\"Name \",sortConfig.key==='name'&&(sortConfig.direction==='asc'?'↑':'↓')]}),/*#__PURE__*/_jsx(\"th\",{children:\"POS\"}),/*#__PURE__*/_jsx(\"th\",{children:\"AGE\"}),/*#__PURE__*/_jsxs(\"th\",{className:\"sortable\",onClick:()=>handleSort('kpi'),children:[\"OVR (KPI) \",sortConfig.key==='kpi'&&(sortConfig.direction==='asc'?'↑':'↓')]}),/*#__PURE__*/_jsxs(\"th\",{className:\"sortable\",onClick:()=>handleSort('fit'),children:[\"FIT % \",sortConfig.key==='fit'&&(sortConfig.direction==='asc'?'↑':'↓')]}),/*#__PURE__*/_jsxs(\"th\",{className:\"sortable\",onClick:()=>handleSort('confidence'),children:[\"CONF % \",sortConfig.key==='confidence'&&(sortConfig.direction==='asc'?'↑':'↓')]}),/*#__PURE__*/_jsxs(\"th\",{className:\"sortable\",onClick:()=>handleSort('scholarship'),children:[\"SCH ALLOT \",sortConfig.key==='scholarship'&&(sortConfig.direction==='asc'?'↑':'↓')]}),/*#__PURE__*/_jsx(\"th\",{children:\"NIL VALUE ($)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ELIG.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"FLAGS\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ACTIONS\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:sortedRoster.map(player=>{const isSelected=(selectedPlayer===null||selectedPlayer===void 0?void 0:selectedPlayer.id)===player.id;// Calculate scholarship slot (0.0-1.0) from dollar amount or use existing slot\nlet scholarshipSlot=player.scholarship_slot;if(!scholarshipSlot&&player.scholarship){const scholarshipCap=(coachingBias===null||coachingBias===void 0?void 0:coachingBias.scholarshipCap)||12;const maxScholarship=scholarshipCap*10000;// Max per player\nscholarshipSlot=Math.min(parseFloat(player.scholarship)/maxScholarship,1.0);}scholarshipSlot=scholarshipSlot||0;const isEditingScholarship=(editingFinancial===null||editingFinancial===void 0?void 0:editingFinancial.playerId)===player.id&&(editingFinancial===null||editingFinancial===void 0?void 0:editingFinancial.field)==='scholarship';const isEditingNIL=(editingFinancial===null||editingFinancial===void 0?void 0:editingFinancial.playerId)===player.id&&(editingFinancial===null||editingFinancial===void 0?void 0:editingFinancial.field)==='nil';return/*#__PURE__*/_jsxs(\"tr\",{className:isSelected?'selected':'',onClick:()=>setSelectedPlayer(player),children:[/*#__PURE__*/_jsx(\"td\",{className:\"player-name clickable\",children:player.name}),/*#__PURE__*/_jsx(\"td\",{children:player.position}),/*#__PURE__*/_jsx(\"td\",{children:player.age||'N/A'}),/*#__PURE__*/_jsx(\"td\",{className:\"kpi-value\",children:player.final_kpi||player.kpi||0}),/*#__PURE__*/_jsxs(\"td\",{children:[player.fit||0,\"%\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[player.confidence||0,\"%\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"financial-cell clickable\",onClick:e=>handleFinancialClick(e,player,'scholarship'),title:\"Click to edit\",children:isEditingScholarship?/*#__PURE__*/_jsx(\"div\",{className:\"inline-edit\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",max:\"1\",step:\"0.1\",value:tempFinancialValue,onChange:e=>setTempFinancialValue(e.target.value),onBlur:()=>handleFinancialSave(player.id,'scholarship'),onKeyPress:e=>{if(e.key==='Enter'){handleFinancialSave(player.id,'scholarship');}else if(e.key==='Escape'){handleFinancialCancel();}},autoFocus:true,onClick:e=>e.stopPropagation()})}):scholarshipSlot.toFixed(1)}),/*#__PURE__*/_jsx(\"td\",{className:\"financial-cell clickable\",onClick:e=>handleFinancialClick(e,player,'nil'),title:\"Click to edit\",children:isEditingNIL?/*#__PURE__*/_jsx(\"div\",{className:\"inline-edit\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",value:tempFinancialValue,onChange:e=>setTempFinancialValue(e.target.value),onBlur:()=>handleFinancialSave(player.id,'nil'),onKeyPress:e=>{if(e.key==='Enter'){handleFinancialSave(player.id,'nil');}else if(e.key==='Escape'){handleFinancialCancel();}},autoFocus:true,onClick:e=>e.stopPropagation()})}):\"$\".concat((player.nil_value_suggestion||player.nil||0).toLocaleString())}),/*#__PURE__*/_jsx(\"td\",{children:player.eligibility||'Active'}),/*#__PURE__*/_jsx(\"td\",{children:player.flags&&player.flags.length>0?'⚠️':'—'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"action-menu\",onClick:e=>e.stopPropagation(),children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"action-btn-menu\",onClick:()=>setSelectedPlayer(player),children:\"\\u22EE\"})})})]},player.id);})})]}),selectedPlayer&&/*#__PURE__*/_jsxs(\"div\",{className:\"player-detail-panel slide-down\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-header-bar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"player-header-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"player-headshot\",children:selectedPlayer.name.charAt(0)}),/*#__PURE__*/_jsxs(\"div\",{className:\"player-header-details\",children:[/*#__PURE__*/_jsx(\"h3\",{children:selectedPlayer.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"player-header-meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"meta-item\",children:selectedPlayer.position}),/*#__PURE__*/_jsx(\"span\",{className:\"meta-divider\",children:\"\\xB7\"}),/*#__PURE__*/_jsx(\"span\",{className:\"meta-item\",children:\"Offensive Threat\"}),/*#__PURE__*/_jsx(\"span\",{className:\"meta-divider\",children:\"\\xB7\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"meta-item\",children:[\"OVR \",selectedPlayer.final_kpi||selectedPlayer.kpi||0]}),/*#__PURE__*/_jsx(\"span\",{className:\"meta-divider\",children:\"|\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"meta-item\",children:[\"Role: \",selectedPlayer.roleProjection||(selectedPlayer.final_kpi>80?'Starter':selectedPlayer.final_kpi>70?'Rotation':'Depth')]}),/*#__PURE__*/_jsx(\"span\",{className:\"meta-divider\",children:\"\\xB7\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"meta-item\",children:[\"Fit \",selectedPlayer.fit||0,\"%\"]})]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"panel-close\",onClick:()=>setSelectedPlayer(null),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:expandedPlayerTab==='kpi'?'active':'',onClick:()=>setExpandedPlayerTab('kpi'),children:\"KPI Profile\"}),/*#__PURE__*/_jsx(\"button\",{className:expandedPlayerTab==='financial'?'active':'',onClick:()=>setExpandedPlayerTab('financial'),children:\"Financial Aid\"}),/*#__PURE__*/_jsx(\"button\",{className:expandedPlayerTab==='performance'?'active':'',onClick:()=>setExpandedPlayerTab('performance'),children:\"Performance Log\"}),/*#__PURE__*/_jsx(\"button\",{className:expandedPlayerTab==='notes'?'active':'',onClick:()=>setExpandedPlayerTab('notes'),children:\"Notes\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel-content-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-column-left\",children:[expandedPlayerTab==='kpi'&&/*#__PURE__*/_jsxs(\"div\",{className:\"kpi-profile-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Confidence Gate\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"metric-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confidence %\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-value\",children:[selectedPlayer.confidence||0,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Data Recency\"}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-value\",children:\"Current Season\"})]})]}),/*#__PURE__*/_jsx(\"h4\",{children:\"KPI Metrics\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"metric-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Overall KPI\"}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-value gold\",children:selectedPlayer.final_kpi||selectedPlayer.kpi||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"System Fit %\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-value\",children:[selectedPlayer.fit||0,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Position\"}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-value\",children:selectedPlayer.position})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Archetype\"}),/*#__PURE__*/_jsx(\"div\",{className:\"metric-value\",children:\"Offensive Threat\"})]})]}),/*#__PURE__*/_jsx(\"h4\",{children:\"Badges & Flags\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"badges-section\",children:[(_selectedPlayer$badge=selectedPlayer.badges)===null||_selectedPlayer$badge===void 0?void 0:_selectedPlayer$badge.map((badge,i)=>/*#__PURE__*/_jsx(\"span\",{className:\"badge\",children:badge},i)),((_selectedPlayer$flags=selectedPlayer.flags)===null||_selectedPlayer$flags===void 0?void 0:_selectedPlayer$flags.length)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flags-section\",children:selectedPlayer.flags.map((flag,i)=>/*#__PURE__*/_jsxs(\"span\",{className:\"flag\",children:[\"\\u26A0 \",flag]},i))})]})]}),expandedPlayerTab==='performance'&&/*#__PURE__*/_jsx(\"div\",{className:\"performance-section\",children:/*#__PURE__*/_jsx(\"p\",{className:\"empty-note\",children:\"Performance log will display game-by-game or season summary when connected to KaNeXT Stats.\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel-column-right\",children:[expandedPlayerTab==='financial'&&/*#__PURE__*/_jsxs(\"div\",{className:\"financial-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Scholarship Allocation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Scholarship Slot (0.0 - 1.0)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",max:\"1\",step:\"0.1\",value:selectedPlayer.scholarship_slot||(selectedPlayer.scholarship?parseFloat(selectedPlayer.scholarship)/(((coachingBias===null||coachingBias===void 0?void 0:coachingBias.scholarshipCap)||12)*10000):0),onChange:e=>{const slot=parseFloat(e.target.value)||0;setSelectedPlayer(_objectSpread(_objectSpread({},selectedPlayer),{},{scholarship_slot:Math.min(Math.max(slot,0),1.0),scholarship:slot*((coachingBias===null||coachingBias===void 0?void 0:coachingBias.scholarshipCap)||12)*10000}));}}),/*#__PURE__*/_jsxs(\"p\",{className:\"form-note\",children:[\"Current: \",(selectedPlayer.scholarship_slot||0).toFixed(1),\" slot\"]})]}),/*#__PURE__*/_jsx(\"h4\",{children:\"NIL Value\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"NIL Value ($)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",value:selectedPlayer.nil_value_suggestion||selectedPlayer.nil||0,onChange:e=>{setSelectedPlayer(_objectSpread(_objectSpread({},selectedPlayer),{},{nil_value_suggestion:parseFloat(e.target.value)||0,nil:parseFloat(e.target.value)||0}));}}),/*#__PURE__*/_jsx(\"p\",{className:\"form-note\",children:\"Projected NIL valuation\"})]}),/*#__PURE__*/_jsx(\"h4\",{children:\"Funding Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Funding Source:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:\"Scholarship + NIL\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Last Updated:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:selectedPlayer.timestamp?new Date(selectedPlayer.timestamp).toLocaleDateString():'N/A'})]})]}),expandedPlayerTab==='notes'&&/*#__PURE__*/_jsx(\"div\",{className:\"notes-section\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"notes-input\",placeholder:\"Add notes about this player...\",value:selectedPlayer.notes||'',onChange:e=>{setSelectedPlayer(_objectSpread(_objectSpread({},selectedPlayer),{},{notes:e.target.value}));}})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:handleViewInPlayerIQ,children:\"View in Player IQ\\u2122\"}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:handleSavePlayerChanges,children:\"Save Changes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"danger-btn\",onClick:handleRemoveToRecruiting,children:\"Remove Player\"})]})]})]})}),activeView==='depth'&&/*#__PURE__*/_jsxs(\"div\",{className:\"depth-chart-view\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"depth-chart-action-bar\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"action-bar-btn\",onClick:handleEvaluateTeam,children:[/*#__PURE__*/_jsx(\"span\",{className:\"btn-icon\",children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"span\",{className:\"btn-label\",children:\"Evaluate Team\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"action-bar-btn\",onClick:handleRunPrediXt,children:[/*#__PURE__*/_jsx(\"span\",{className:\"btn-icon\",children:\"\\uD83E\\uDDE0\"}),/*#__PURE__*/_jsx(\"span\",{className:\"btn-label\",children:\"Run PrediXt (Single Game)\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"action-bar-btn\",onClick:handleRunSeasonProjection,children:[/*#__PURE__*/_jsx(\"span\",{className:\"btn-icon\",children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"span\",{className:\"btn-label\",children:\"Run Season Projection (What-If)\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"action-bar-btn primary\",onClick:handleApplyToRoster,children:[/*#__PURE__*/_jsx(\"span\",{className:\"btn-icon\",children:\"\\uD83D\\uDCBE\"}),/*#__PURE__*/_jsx(\"span\",{className:\"btn-label\",children:\"Apply to Roster\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"depth-chart-canvas\",children:/*#__PURE__*/_jsx(\"div\",{className:\"depth-chart-grid\",children:['PG','CG','Wing','Forward','Big'].map(position=>{const primaryPlayers=getPlayersForPosition(position);const benchPlayers=getBenchPlayers(position);const positionWeight=calculatePositionWeight(position,depthChartState);const isDragOver=dragOverPosition===position;return/*#__PURE__*/_jsxs(\"div\",{className:\"position-column \".concat(isDragOver?'drag-over':''),onDragOver:e=>handleDragOver(e,position),onDragLeave:handleDragLeave,onDrop:e=>handleDrop(e,position),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"position-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"position-name\",children:position}),positionWeight>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"weight-indicator\",children:[positionWeight.toFixed(0),\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"primary-slots\",children:primaryPlayers.length>0?primaryPlayers.map((player,idx)=>{const scholarshipSlot=player.scholarship_slot||(player.scholarship?parseFloat(player.scholarship)/(((coachingBias===null||coachingBias===void 0?void 0:coachingBias.scholarshipCap)||12)*10000):0);return/*#__PURE__*/_jsxs(\"div\",{className:\"player-card\",draggable:true,onDragStart:e=>handleDragStart(e,player,position),children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-name\",children:player.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-stats\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat-item\",children:[\"OVR: \",player.final_kpi||player.kpi||0]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-item\",children:[\"FIT: \",player.fit||0,\"%\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-item\",children:[\"CONF: \",player.confidence||0,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"archetype\",children:\"Offensive Threat\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"scholarship-slot\",children:[\"Slot: \",scholarshipSlot.toFixed(1)]})]})]},player.id);}):/*#__PURE__*/_jsx(\"div\",{className:\"empty-slot\",children:\"Drop players here\"})}),benchPlayers.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bench-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bench-header\",children:[\"Bench (\",benchPlayers.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"bench-list\",children:benchPlayers.map(player=>/*#__PURE__*/_jsxs(\"div\",{className:\"bench-player\",draggable:true,onDragStart:e=>handleDragStart(e,player,null),children:[/*#__PURE__*/_jsx(\"span\",{className:\"bench-name\",children:player.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"bench-fit\",children:[player.fit||0,\"%\"]})]},player.id))})]})]},position);})})}),showTeamEvaluation&&/*#__PURE__*/_jsxs(\"div\",{className:\"team-evaluation-side-panel slide-in\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"evaluation-panel-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Team Evaluation Report\"}),/*#__PURE__*/_jsx(\"button\",{className:\"panel-close\",onClick:()=>setShowTeamEvaluation(false),children:\"\\xD7\"})]}),(()=>{const report=generateTeamReport();return/*#__PURE__*/_jsxs(\"div\",{className:\"evaluation-panel-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"report-header-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"report-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Team:\"}),/*#__PURE__*/_jsx(\"span\",{children:(coachProfile===null||coachProfile===void 0?void 0:coachProfile.team)||'Not Set'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Division:\"}),/*#__PURE__*/_jsx(\"span\",{children:report.division})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"System:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[(coachingBias===null||coachingBias===void 0?void 0:coachingBias.offensiveSystem)||'Not Set',\" / \",(coachingBias===null||coachingBias===void 0?void 0:coachingBias.defensiveSystem)||'Not Set']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Team KPI:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"kpi-value\",children:report.teamKPI})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fit %:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[report.fitPercent,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confidence Avg:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[report.confidenceAvg,\"%\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Summary\"}),/*#__PURE__*/_jsx(\"p\",{className:\"report-summary\",children:report.summary})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-section coach-k-comment\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Coach K\\u2122 Comment\"}),/*#__PURE__*/_jsx(\"p\",{className:\"coach-k-text\",children:report.coachKComment})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Improvement Path\"}),/*#__PURE__*/_jsx(\"p\",{className:\"improvement-path\",children:report.improvementPath})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Resources\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"resources-list\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"resource-item\",children:report.resources.scholarshipSlots}),/*#__PURE__*/_jsx(\"span\",{className:\"resource-item\",children:report.resources.budget}),/*#__PURE__*/_jsx(\"span\",{className:\"resource-item\",children:report.resources.nilUnused})]})]})]});})(),/*#__PURE__*/_jsxs(\"div\",{className:\"evaluation-panel-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:handleShowMatchingRecruits,children:\"Show Matching Recruits\"}),/*#__PURE__*/_jsx(\"button\",{className:\"primary-btn\",onClick:handleSaveReport,children:\"Save Report\"})]})]})]})]},activeView),/*#__PURE__*/_jsx(CoachingIQDrawer,{isOpen:showDrawer,onClose:()=>setShowDrawer(false)}),/*#__PURE__*/_jsx(CoachKReactionPanel,{teamMetrics:teamMetrics,sandboxMetrics:sandboxMetrics,depthChartState:depthChartState,coachingBias:coachingBias,coachProfile:coachProfile}),showRecruitingModal&&/*#__PURE__*/_jsx(\"div\",{className:\"recruiting-modal-overlay\",onClick:()=>setShowRecruitingModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"recruiting-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add from Recruiting Board\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:()=>setShowRecruitingModal(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"modal-note\",children:\"Select evaluated recruits (Confidence \\u2265 60) to add to your roster.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"recruits-list\",children:/*#__PURE__*/_jsx(\"p\",{className:\"empty-note\",children:\"No qualified recruits available. Evaluate players in Recruiting IQ\\u2122 first.\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:()=>setShowRecruitingModal(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"primary-btn\",disabled:true,children:\"Add Selected\"})]})]})})]});};export default TeamIQPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useApp","isAuthenticated","CoachingIQDrawer","CoachKReactionPanel","jsx","_jsx","jsxs","_jsxs","TeamIQPage","_teamState$roster","_selectedPlayer$badge","_selectedPlayer$flags","navigate","coachProfile","coachingBias","teamState","setTeamState","addCoachKMessage","activeView","setActiveView","selectedPlayer","setSelectedPlayer","expandedPlayerTab","setExpandedPlayerTab","draggedPlayer","setDraggedPlayer","depthChartState","setDepthChartState","showTeamEvaluation","setShowTeamEvaluation","showDrawer","setShowDrawer","sortConfig","setSortConfig","key","direction","editingFinancial","setEditingFinancial","tempFinancialValue","setTempFinancialValue","sandboxMetrics","setSandboxMetrics","dragOverPosition","setDragOverPosition","teamMetrics","setTeamMetrics","teamKPI","teamKPIBand","systemFit","scholarshipUsage","scholarshipSlots","nilUtilized","confidenceAvg","showRecruitingModal","setShowRecruitingModal","getTeamKPIBand","kpi","roster","length","avgKPI","reduce","sum","p","final_kpi","avgFit","fit","avgConf","confidence","filter","parseFloat","scholarship_suggestion","scholarship","scholarshipCap","totalNIL","nil_value_suggestion","nil","maxNIL","nilPool","toFixed","Math","round","handleRemovePlayer","playerId","window","confirm","console","log","prev","_objectSpread","id","handleSavePlayerChanges","map","totalScholarship","playerScholarship","scholarship_slot","playerNIL","alert","handleSort","handleFinancialClick","e","player","field","stopPropagation","handleFinancialSave","currentRoster","sampleRoster","find","updatedPlayer","value","min","max","totalSlots","slot","nearCap","setTimeout","speaker","message","type","dispatchEvent","CustomEvent","detail","handleFinancialCancel","handleViewInPlayerIQ","state","playerData","handleRemoveToRecruiting","concat","name","trigger","context","playerName","position","age","eligibility","flags","displayRoster","sortedRoster","sort","a","b","aValue","bValue","recalcSandboxMetrics","lineupState","allPlayers","Object","values","flat","newMetrics","keys","deltaKPI","abs","handleDragStart","currentPosition","dataTransfer","effectAllowed","setData","handleDragOver","preventDefault","dropEffect","handleDragLeave","handleDrop","targetPosition","from","to","newState","fromPosition","toPosition","getPlayersForPosition","getBenchPlayers","primaryPlayers","allPositionPlayers","primaryIds","includes","slice","calculatePositionWeight","players","totalKPI","totalTeamKPI","generateTeamReport","currentMetrics","lineupPlayers","tier","summary","coachKComment","improvementPath","remainingSlots","remainingBudget","toLocaleString","nilUnused","division","fitPercent","resources","budget","handleEvaluateTeam","handleRunPrediXt","sandbox","playerCount","simulationType","lineup","handleRunSeasonProjection","winProb","opponent","handleApplyToRoster","handleShowMatchingRecruits","report","filters","minKPI","needs","handleSaveReport","handleViewChange","view","handleOpenDrawer","addEventListener","removeEventListener","handleContextClick","event","className","children","onClick","title","team","offensiveSystem","defensiveSystem","toLowerCase","isSelected","scholarshipSlot","maxScholarship","isEditingScholarship","isEditingNIL","step","onChange","target","onBlur","onKeyPress","autoFocus","charAt","roleProjection","badges","badge","i","flag","timestamp","Date","toLocaleDateString","placeholder","notes","benchPlayers","positionWeight","isDragOver","onDragOver","onDragLeave","onDrop","idx","draggable","onDragStart","isOpen","onClose","disabled"],"sources":["/Users/muhammadfizantariq/Downloads/Knext_2/frontend/src/pages/TeamIQPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useApp } from '../context/AppContext';\nimport { isAuthenticated } from '../services/authService';\nimport CoachingIQDrawer from '../components/CoachingIQDrawer';\nimport CoachKReactionPanel from '../components/CoachKReactionPanel';\nimport './TeamIQPage.css';\n\nconst TeamIQPage = () => {\n  const navigate = useNavigate();\n  const { coachProfile, coachingBias, teamState, setTeamState, addCoachKMessage } = useApp();\n  \n  const [activeView, setActiveView] = useState('roster'); // roster or depth\n  const [selectedPlayer, setSelectedPlayer] = useState(null);\n  const [expandedPlayerTab, setExpandedPlayerTab] = useState('kpi'); // kpi, financial, performance, notes\n  const [draggedPlayer, setDraggedPlayer] = useState(null);\n  const [depthChartState, setDepthChartState] = useState({}); // Sandbox state for depth chart\n  const [showTeamEvaluation, setShowTeamEvaluation] = useState(false);\n  const [showDrawer, setShowDrawer] = useState(false);\n  const [sortConfig, setSortConfig] = useState({ key: null, direction: 'asc' });\n  const [editingFinancial, setEditingFinancial] = useState(null); // { playerId, field: 'scholarship' | 'nil' }\n  const [tempFinancialValue, setTempFinancialValue] = useState('');\n  const [sandboxMetrics, setSandboxMetrics] = useState(null); // Metrics for sandbox lineup\n  const [dragOverPosition, setDragOverPosition] = useState(null);\n  const [teamMetrics, setTeamMetrics] = useState({\n    teamKPI: 0,\n    teamKPIBand: 'F',\n    systemFit: 0,\n    scholarshipUsage: 0,\n    scholarshipSlots: 0,\n    nilUtilized: 0,\n    confidenceAvg: 0\n  });\n  const [showRecruitingModal, setShowRecruitingModal] = useState(false);\n\n  // Calculate Team KPI Band (A-F)\n  const getTeamKPIBand = (kpi) => {\n    if (kpi >= 90) return 'A';\n    if (kpi >= 80) return 'B';\n    if (kpi >= 70) return 'C';\n    if (kpi >= 60) return 'D';\n    return 'F';\n  };\n\n  useEffect(() => {\n    // Calculate team metrics\n    if (teamState.roster && teamState.roster.length > 0) {\n      const avgKPI = teamState.roster.reduce((sum, p) => sum + (p.final_kpi || p.kpi || 0), 0) / teamState.roster.length;\n      const avgFit = teamState.roster.reduce((sum, p) => sum + (p.fit || 0), 0) / teamState.roster.length;\n      const avgConf = teamState.roster.reduce((sum, p) => sum + (p.confidence || 0), 0) / teamState.roster.length;\n      \n      // Count scholarship slots (players with scholarship > 0)\n      const scholarshipSlots = teamState.roster.filter(p => parseFloat(p.scholarship_suggestion || p.scholarship || 0) > 0).length;\n      const scholarshipCap = coachingBias?.scholarshipCap || 12;\n      \n      const totalNIL = teamState.roster.reduce((sum, p) => sum + parseFloat(p.nil_value_suggestion || p.nil || 0), 0);\n      const maxNIL = coachingBias?.nilPool || 50000;\n\n      setTeamMetrics({\n        teamKPI: parseFloat(avgKPI.toFixed(1)),\n        teamKPIBand: getTeamKPIBand(avgKPI),\n        systemFit: Math.round(avgFit),\n        scholarshipUsage: scholarshipSlots,\n        scholarshipSlots: scholarshipSlots,\n        nilUtilized: Math.round((totalNIL / maxNIL) * 100),\n        confidenceAvg: Math.round(avgConf)\n      });\n    } else {\n      setTeamMetrics({\n        teamKPI: 0,\n        teamKPIBand: 'F',\n        systemFit: 0,\n        scholarshipUsage: 0,\n        scholarshipSlots: 0,\n        nilUtilized: 0,\n        confidenceAvg: 0\n      });\n    }\n  }, [teamState.roster, coachingBias]);\n\n  const handleRemovePlayer = (playerId) => {\n    if (window.confirm('Remove this player from roster?')) {\n      console.log('[LOGIC HOOK: handleRemovePlayer] Removing player:', playerId);\n      setTeamState(prev => ({\n        ...prev,\n        roster: prev.roster.filter(p => p.id !== playerId)\n      }));\n      setSelectedPlayer(null);\n    }\n  };\n\n  const handleSavePlayerChanges = () => {\n    if (selectedPlayer) {\n      console.log('[LOGIC HOOK: handleSavePlayerChanges] Saving changes for player:', selectedPlayer);\n      setTeamState(prev => ({\n        ...prev,\n        roster: prev.roster.map(p => p.id === selectedPlayer.id ? selectedPlayer : p)\n      }));\n      \n      // Recalculate financial summary\n      const totalScholarship = teamState.roster.reduce((sum, p) => {\n        const playerScholarship = p.id === selectedPlayer.id \n          ? parseFloat(selectedPlayer.scholarship_slot || selectedPlayer.scholarship || 0)\n          : parseFloat(p.scholarship_slot || p.scholarship || 0);\n        return sum + playerScholarship;\n      }, 0);\n      \n      const totalNIL = teamState.roster.reduce((sum, p) => {\n        const playerNIL = p.id === selectedPlayer.id\n          ? parseFloat(selectedPlayer.nil_value_suggestion || selectedPlayer.nil || 0)\n          : parseFloat(p.nil_value_suggestion || p.nil || 0);\n        return sum + playerNIL;\n      }, 0);\n      \n      alert('✅ Player changes saved');\n    }\n  };\n\n  const handleSort = (key) => {\n    let direction = 'asc';\n    if (sortConfig.key === key && sortConfig.direction === 'asc') {\n      direction = 'desc';\n    }\n    setSortConfig({ key, direction });\n  };\n\n  const handleFinancialClick = (e, player, field) => {\n    e.stopPropagation();\n    setEditingFinancial({ playerId: player.id, field });\n    if (field === 'scholarship') {\n      setTempFinancialValue(player.scholarship_slot || player.scholarship || '0.0');\n    } else {\n      setTempFinancialValue(player.nil_value_suggestion || player.nil || '0');\n    }\n  };\n\n  const handleFinancialSave = (playerId, field) => {\n    const currentRoster = teamState.roster && teamState.roster.length > 0 ? teamState.roster : sampleRoster;\n    const player = currentRoster.find(p => p.id === playerId);\n    if (!player) return;\n\n    const updatedPlayer = { ...player };\n    if (field === 'scholarship') {\n      const value = parseFloat(tempFinancialValue) || 0;\n      updatedPlayer.scholarship_slot = Math.min(Math.max(value, 0), 1.0);\n      updatedPlayer.scholarship = updatedPlayer.scholarship_slot * (coachingBias?.scholarshipCap || 12) * 10000;\n    } else {\n      updatedPlayer.nil_value_suggestion = parseFloat(tempFinancialValue) || 0;\n      updatedPlayer.nil = updatedPlayer.nil_value_suggestion;\n    }\n\n    setTeamState(prev => ({\n      ...prev,\n      roster: prev.roster.map(p => p.id === playerId ? updatedPlayer : p)\n    }));\n\n    // Recalculate and show Coach K™ tip if near scholarship cap\n    const totalSlots = teamState.roster.reduce((sum, p) => {\n      const slot = p.id === playerId \n        ? updatedPlayer.scholarship_slot \n        : parseFloat(p.scholarship_slot || (p.scholarship ? p.scholarship / ((coachingBias?.scholarshipCap || 12) * 10000) : 0));\n      return sum + slot;\n    }, 0);\n    \n    const scholarshipCap = coachingBias?.scholarshipCap || 12;\n    const nearCap = totalSlots >= scholarshipCap * 0.9;\n    \n    if (nearCap) {\n      setTimeout(() => {\n        addCoachKMessage({\n          id: 'TIQ_FINANCIAL_TIP',\n          speaker: 'Coach K',\n          message: `You're near your scholarship cap — reallocating here affects your financial summary.`,\n          type: 'warning'\n        });\n      }, 500);\n    }\n\n    // Dispatch financial edit event for Coach K™\n    window.dispatchEvent(new CustomEvent('teamFinancialEdit', {\n      detail: {\n        field: field,\n        nearCap: nearCap\n      }\n    }));\n\n    setEditingFinancial(null);\n    setTempFinancialValue('');\n  };\n\n  const handleFinancialCancel = () => {\n    setEditingFinancial(null);\n    setTempFinancialValue('');\n  };\n\n  const handleViewInPlayerIQ = () => {\n    if (selectedPlayer) {\n      navigate('/player-iq', { state: { playerData: selectedPlayer } });\n    }\n  };\n\n  const handleRemoveToRecruiting = () => {\n    if (selectedPlayer && window.confirm(`Move ${selectedPlayer.name} to Recruiting Board (Released)?`)) {\n      console.log('[LOGIC HOOK: handleRemoveToRecruiting] Moving player to Recruiting Board:', selectedPlayer.id);\n      \n      // Dispatch roster change event for Coach K™\n      window.dispatchEvent(new CustomEvent('teamRosterChange', {\n        detail: {\n          trigger: 'roster_remove',\n          context: {\n            playerName: selectedPlayer.name,\n            playerId: selectedPlayer.id\n          }\n        }\n      }));\n      \n      setTeamState(prev => ({\n        ...prev,\n        roster: prev.roster.filter(p => p.id !== selectedPlayer.id)\n      }));\n      setSelectedPlayer(null);\n      alert(`✅ ${selectedPlayer.name} moved to Recruiting Board`);\n    }\n  };\n\n  // Sample data for Phase 1 demonstration\n  const sampleRoster = teamState.roster && teamState.roster.length > 0 \n    ? teamState.roster \n    : [\n        { id: '1', name: 'J. Murray', position: 'PG', age: 24, kpi: 85, fit: 81, confidence: 84, scholarship: 12000, nil: 7200, eligibility: 'Active', flags: [] },\n        { id: '2', name: 'M. Johnson', position: 'SG', age: 22, kpi: 78, fit: 75, confidence: 82, scholarship: 10000, nil: 5400, eligibility: 'Active', flags: [] },\n        { id: '3', name: 'T. Williams', position: 'SF', age: 21, kpi: 82, fit: 88, confidence: 79, scholarship: 11000, nil: 6800, eligibility: 'Active', flags: [] },\n        { id: '4', name: 'C. Davis', position: 'PF', age: 23, kpi: 76, fit: 72, confidence: 77, scholarship: 9500, nil: 4800, eligibility: 'Active', flags: [] }\n      ];\n\n  const displayRoster = teamState.roster && teamState.roster.length > 0 ? teamState.roster : sampleRoster;\n\n  // Sort roster based on sortConfig\n  const sortedRoster = [...displayRoster].sort((a, b) => {\n    if (!sortConfig.key) return 0;\n\n    let aValue, bValue;\n    switch (sortConfig.key) {\n      case 'kpi':\n        aValue = a.final_kpi || a.kpi || 0;\n        bValue = b.final_kpi || b.kpi || 0;\n        break;\n      case 'fit':\n        aValue = a.fit || 0;\n        bValue = b.fit || 0;\n        break;\n      case 'confidence':\n        aValue = a.confidence || 0;\n        bValue = b.confidence || 0;\n        break;\n      case 'scholarship':\n        aValue = parseFloat(a.scholarship_slot || a.scholarship || 0);\n        bValue = parseFloat(b.scholarship_slot || b.scholarship || 0);\n        break;\n      default:\n        return 0;\n    }\n\n    if (sortConfig.direction === 'asc') {\n      return aValue > bValue ? 1 : -1;\n    } else {\n      return aValue < bValue ? 1 : -1;\n    }\n  });\n\n  // Recalculate team metrics for sandbox lineup\n  const recalcSandboxMetrics = (lineupState) => {\n    const allPlayers = Object.values(lineupState).flat();\n    if (allPlayers.length === 0) {\n      setSandboxMetrics(null);\n      return;\n    }\n\n    const avgKPI = allPlayers.reduce((sum, p) => sum + (p.final_kpi || p.kpi || 0), 0) / allPlayers.length;\n    const avgFit = allPlayers.reduce((sum, p) => sum + (p.fit || 0), 0) / allPlayers.length;\n    const avgConf = allPlayers.reduce((sum, p) => sum + (p.confidence || 0), 0) / allPlayers.length;\n\n    const newMetrics = {\n      teamKPI: parseFloat(avgKPI.toFixed(1)),\n      teamKPIBand: getTeamKPIBand(avgKPI),\n      systemFit: Math.round(avgFit),\n      confidenceAvg: Math.round(avgConf)\n    };\n\n    setSandboxMetrics(newMetrics);\n\n    // Update header summary if sandbox is active\n    if (Object.keys(lineupState).length > 0) {\n      const deltaKPI = newMetrics.teamKPI - teamMetrics.teamKPI;\n      if (Math.abs(deltaKPI) > 0.1) {\n        setTimeout(() => {\n          addCoachKMessage({\n            id: 'TIQ_DEPTH_CHART_UPDATE',\n            speaker: 'Coach K',\n            message: `Roster adjusted — Team KPI ${deltaKPI >= 0 ? '+' : ''}${deltaKPI.toFixed(1)}.`,\n            type: 'info'\n          });\n        }, 300);\n      }\n    }\n  };\n\n  const handleDragStart = (e, player, currentPosition) => {\n    setDraggedPlayer({ player, currentPosition });\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/plain', player.id);\n  };\n\n  const handleDragOver = (e, position) => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n    setDragOverPosition(position);\n  };\n\n  const handleDragLeave = () => {\n    setDragOverPosition(null);\n  };\n\n  const handleDrop = (e, targetPosition) => {\n    e.preventDefault();\n    setDragOverPosition(null);\n    \n    if (draggedPlayer) {\n      const { player, currentPosition } = draggedPlayer;\n      \n      console.log('[LOGIC HOOK: handleDrop] Moving player to position:', {\n        playerId: player.id,\n        playerName: player.name,\n        from: currentPosition,\n        to: targetPosition\n      });\n\n      // Remove from current position\n      const newState = { ...depthChartState };\n      if (currentPosition && newState[currentPosition]) {\n        newState[currentPosition] = newState[currentPosition].filter(p => p.id !== player.id);\n      }\n\n      // Add to target position\n      if (!newState[targetPosition]) {\n        newState[targetPosition] = [];\n      }\n      newState[targetPosition] = [...newState[targetPosition], player];\n\n      setDepthChartState(newState);\n      recalcSandboxMetrics(newState);\n      \n      // Dispatch depth swap event for Coach K™\n      window.dispatchEvent(new CustomEvent('teamDepthSwap', {\n        detail: {\n          fromPosition: currentPosition,\n          toPosition: targetPosition,\n          playerName: player.name\n        }\n      }));\n      \n      setDraggedPlayer(null);\n    }\n  };\n\n  const getPlayersForPosition = (position) => {\n    // Get players from sandbox state or roster\n    if (depthChartState[position] && depthChartState[position].length > 0) {\n      return depthChartState[position];\n    }\n    \n    // Fallback to roster players matching position\n    return displayRoster.filter(p => {\n      if (position === 'PG') return p.position === 'PG';\n      if (position === 'CG') return p.position === 'SG';\n      if (position === 'Wing') return p.position === 'SF' || p.position === 'SG';\n      if (position === 'Forward') return p.position === 'PF' || p.position === 'SF';\n      if (position === 'Big') return p.position === 'C' || p.position === 'PF';\n      return false;\n    });\n  };\n\n  const getBenchPlayers = (position) => {\n    const primaryPlayers = getPlayersForPosition(position);\n    const allPositionPlayers = displayRoster.filter(p => {\n      if (position === 'PG') return p.position === 'PG';\n      if (position === 'CG') return p.position === 'SG';\n      if (position === 'Wing') return p.position === 'SF' || p.position === 'SG';\n      if (position === 'Forward') return p.position === 'PF' || p.position === 'SF';\n      if (position === 'Big') return p.position === 'C' || p.position === 'PF';\n      return false;\n    }).sort((a, b) => (b.fit || 0) - (a.fit || 0));\n\n    // Return up to 3 bench players (excluding primary)\n    const primaryIds = primaryPlayers.map(p => p.id);\n    return allPositionPlayers\n      .filter(p => !primaryIds.includes(p.id))\n      .slice(0, 3);\n  };\n\n  const calculatePositionWeight = (position, lineupState) => {\n    const players = lineupState[position] || [];\n    if (players.length === 0) return 0;\n    \n    const totalKPI = players.reduce((sum, p) => sum + (p.final_kpi || p.kpi || 0), 0);\n    const allPlayers = Object.values(lineupState).flat();\n    const totalTeamKPI = allPlayers.reduce((sum, p) => sum + (p.final_kpi || p.kpi || 0), 0);\n    \n    if (totalTeamKPI === 0) return 0;\n    return (totalKPI / totalTeamKPI) * 100;\n  };\n\n  const generateTeamReport = () => {\n    const currentMetrics = sandboxMetrics || teamMetrics;\n    const lineupPlayers = Object.values(depthChartState).flat().length > 0 \n      ? Object.values(depthChartState).flat()\n      : displayRoster;\n\n    // Generate narrative summary based on metrics\n    const tier = currentMetrics.teamKPI >= 80 ? 'Contender' : currentMetrics.teamKPI >= 70 ? 'Competitive' : 'Building';\n    const summary = `Balanced roster built around guard play and perimeter spacing. Elite shooting; limited rim protection and defensive rebounding below divisional average. ${tier === 'Contender' ? 'Tournament-caliber but undersized against physical teams.' : 'Needs depth to compete at highest level.'}`;\n\n    const coachKComment = currentMetrics.systemFit >= 80 \n      ? `Offense grades Top-15 for your level — defense still mid-tier. Add a rim protector to contend.`\n      : `System alignment at ${currentMetrics.systemFit}% — consider adjusting Coaching IQ weights or adding position-specific talent.`;\n\n    const improvementPath = `Add forward ≥ 82 KPI · boost defensive cluster +5 · shift bias +3 toward defense.`;\n\n    const scholarshipSlots = teamMetrics.scholarshipSlots;\n    const scholarshipCap = coachingBias?.scholarshipCap || 12;\n    const remainingSlots = scholarshipCap - scholarshipSlots;\n    const remainingBudget = (remainingSlots * 10000).toLocaleString();\n    const nilUtilized = teamMetrics.nilUtilized;\n    const nilUnused = 100 - nilUtilized;\n\n    return {\n      division: coachProfile?.division || 'USCAA',\n      teamKPI: currentMetrics.teamKPI,\n      fitPercent: currentMetrics.systemFit,\n      confidenceAvg: currentMetrics.confidenceAvg,\n      tier: tier,\n      summary: summary,\n      coachKComment: coachKComment,\n      improvementPath: improvementPath,\n      resources: {\n        scholarshipSlots: `${remainingSlots.toFixed(1)} scholarship slots`,\n        budget: `$${remainingBudget} budget`,\n        nilUnused: `${nilUnused}% NIL pool unused`\n      }\n    };\n  };\n\n  const handleEvaluateTeam = () => {\n    console.log('[LOGIC HOOK: handleEvaluateTeam] Running team evaluation');\n    setShowTeamEvaluation(true);\n  };\n\n  const handleRunPrediXt = () => {\n    const lineupPlayers = Object.values(depthChartState).flat().length > 0 \n      ? Object.values(depthChartState).flat()\n      : displayRoster;\n    \n    console.log('[LOGIC HOOK: handleRunPrediXt] Running PrediXt with current lineup:', lineupPlayers);\n    \n    addCoachKMessage({\n      id: 'TIQ_PREDIXT_START',\n      speaker: 'Coach K',\n      message: 'Opening PrediXt workspace with current lineup...',\n      type: 'info'\n    });\n\n    // Dispatch PrediXt run event for Coach K™\n    window.dispatchEvent(new CustomEvent('teamPrediXtRun', {\n      detail: {\n        sandbox: true,\n        playerCount: lineupPlayers.length,\n        simulationType: 'single'\n      }\n    }));\n    \n    navigate('/predixt', { state: { lineup: lineupPlayers, sandbox: true } });\n  };\n\n  const handleRunSeasonProjection = () => {\n    const lineupPlayers = Object.values(depthChartState).flat().length > 0 \n      ? Object.values(depthChartState).flat()\n      : displayRoster;\n    \n    console.log('[LOGIC HOOK: handleRunSeasonProjection] Running season projection:', lineupPlayers);\n    \n    addCoachKMessage({\n      id: 'TIQ_SEASON_PROJECTION',\n      speaker: 'Coach K',\n      message: 'Scenario projection running — using sandbox lineup.',\n      type: 'info'\n    });\n\n    // Dispatch scenario projection event for Coach K™\n    window.dispatchEvent(new CustomEvent('teamPrediXtRun', {\n      detail: {\n        sandbox: true,\n        playerCount: lineupPlayers.length,\n        simulationType: 'scenario',\n        winProb: 65, // Mock data\n        opponent: 'UNLV' // Mock data\n      }\n    }));\n    \n    // TODO: Open PrediXt Scenario Projection overlay\n    alert('Season Projection feature coming soon. This will run a full-season simulation using the sandbox roster.');\n  };\n\n  const handleApplyToRoster = () => {\n    if (Object.keys(depthChartState).length === 0) {\n      alert('No changes to apply. Make lineup adjustments first.');\n      return;\n    }\n\n    if (window.confirm('Apply current sandbox lineup as official roster? This will lock the roster and sync across all modules.')) {\n      const lineupPlayers = Object.values(depthChartState).flat();\n      \n      console.log('[LOGIC HOOK: handleApplyToRoster] Applying sandbox lineup to roster:', lineupPlayers);\n      \n      setTeamState(prev => ({\n        ...prev,\n        roster: lineupPlayers\n      }));\n\n      // Clear sandbox state\n      setDepthChartState({});\n      setSandboxMetrics(null);\n\n      addCoachKMessage({\n        id: 'TIQ_ROSTER_LOCKED',\n        speaker: 'Coach K',\n        message: 'Roster locked · PrediXt engine will refresh overnight.',\n        type: 'success'\n      });\n\n      // Dispatch roster apply event for Coach K™\n      window.dispatchEvent(new CustomEvent('teamRosterApply'));\n\n    alert('✅ Lineup applied to roster');\n    }\n  };\n\n  const handleShowMatchingRecruits = () => {\n    const report = generateTeamReport();\n    // Navigate to Recruiting IQ with filters for needed roles\n    navigate('/recruiting-iq', { \n      state: { \n        filters: { \n          minKPI: 82,\n          position: 'PF',\n          needs: 'rim protection'\n        }\n      }\n    });\n  };\n\n  const handleSaveReport = () => {\n    const report = generateTeamReport();\n    console.log('[LOGIC HOOK: handleSaveReport] Saving team evaluation:', report);\n    \n    // TODO: Write team_evaluation object to DB\n    alert('✅ Team evaluation report saved');\n    setShowTeamEvaluation(false);\n  };\n\n  // Simple direct handlers - no useCallback to avoid any closure issues\n  const handleViewChange = (view) => {\n    console.log('[LOGIC HOOK] Switching view to:', view, 'current:', activeView);\n    if (activeView !== view) {\n      setActiveView(view);\n    }\n  };\n\n  useEffect(() => {\n    if (!isAuthenticated() || !coachProfile) {\n      navigate('/login');\n      return;\n    }\n\n    // Listen for Coaching IQ drawer open event\n    const handleOpenDrawer = () => {\n      setShowDrawer(true);\n    };\n\n    window.addEventListener('openCoachingIQDrawer', handleOpenDrawer);\n\n    return () => {\n      window.removeEventListener('openCoachingIQDrawer', handleOpenDrawer);\n    };\n  }, [navigate, coachProfile]);\n\n  const handleContextClick = (field) => {\n    if (field === 'system') {\n      const event = new CustomEvent('openCoachingIQDrawer');\n      window.dispatchEvent(event);\n      setShowDrawer(true);\n    } else if (field === 'roster') {\n      // Scroll to roster table or ensure roster view is active\n      setActiveView('roster');\n    }\n  };\n\n  if (!isAuthenticated() || !coachProfile) {\n    return null;\n  }\n\n  return (\n    <div className=\"team-iq-page\">\n      {/* Fixed Dual-Strip Header */}\n      <header className=\"team-iq-header\">\n        {/* Main Header Bar (80px) */}\n        <div className=\"header-main-bar\">\n          {/* Left Zone - Module Identity & Context */}\n          <div className=\"header-left\">\n            <h1 className=\"header-title\">TEAM IQ™ DASHBOARD</h1>\n            <p className=\"header-subtitle\">Aggregate roster intelligence · system readiness · resource balance.</p>\n            <div className=\"context-line\">\n              <span \n                className=\"context-field clickable\" \n                onClick={() => handleContextClick('team')}\n                title=\"Team Profile\"\n              >\n                Team: {coachProfile?.team || 'Not Set'}\n              </span>\n              <span className=\"context-divider\">·</span>\n              <span \n                className=\"context-field clickable\" \n                onClick={() => handleContextClick('division')}\n                title=\"Division\"\n              >\n                Division: {coachProfile?.division || 'Not Set'}\n              </span>\n              <span className=\"context-divider\">·</span>\n              <span \n                className=\"context-field clickable\" \n                onClick={() => handleContextClick('system')}\n                title=\"Open Coaching IQ™\"\n              >\n                System: {coachingBias?.offensiveSystem || 'Not Set'} / {coachingBias?.defensiveSystem || 'Not Set'}\n              </span>\n              <span className=\"context-divider\">·</span>\n              <span \n                className=\"context-field clickable\" \n                onClick={() => handleContextClick('roster')}\n                title=\"View Roster\"\n              >\n              Roster: {teamState.roster?.length || 0} Players\n              </span>\n            </div>\n          </div>\n\n          {/* Center Zone - View Tabs */}\n          <div className=\"header-center\">\n            <div className=\"view-tabs\">\n              <button \n                type=\"button\"\n                className={`view-tab ${activeView === 'roster' ? 'active' : ''}`}\n                onClick={() => handleViewChange('roster')}\n              >\n                Roster View\n              </button>\n              <button \n                type=\"button\"\n                className={`view-tab ${activeView === 'depth' ? 'active' : ''}`}\n                onClick={() => handleViewChange('depth')}\n              >\n                Depth Chart View\n              </button>\n            </div>\n          </div>\n\n          {/* Right Zone - Global Actions */}\n          <div className=\"header-right\">\n            <button \n              className=\"action-btn-icon\" \n              onClick={() => {\n                console.log('[LOGIC HOOK] Opening Coaching IQ Drawer from Team IQ header');\n                const event = new CustomEvent('openCoachingIQDrawer');\n                window.dispatchEvent(event);\n                setShowDrawer(true);\n              }}\n              title=\"Open Coaching IQ™\"\n            >\n              <span className=\"icon-emoji\">🧠</span>\n              <span className=\"action-label\">Coaching IQ™</span>\n            </button>\n            <button \n              className=\"action-btn-icon\" \n              onClick={() => {\n                console.log('[LOGIC HOOK: handleAddFromRecruiting] Opening Add from Recruiting Board modal');\n                setShowRecruitingModal(true);\n              }}\n              title=\"Add from Recruiting Board\"\n            >\n              <span className=\"icon-emoji\">📋</span>\n              <span className=\"action-label\">Add from Recruiting Board</span>\n            </button>\n            <button \n              className=\"action-btn-icon\" \n              onClick={() => navigate('/office')}\n              title=\"Return to Office\"\n            >\n              <span className=\"icon-emoji\">🏠</span>\n              <span className=\"action-label\">Return to Office</span>\n            </button>\n          </div>\n        </div>\n\n        {/* Summary Line (40px) */}\n        <div className=\"summary-line\">\n          <div className=\"summary-item\">\n            <span className=\"summary-label\">Team KPI:</span>\n            <span \n              className={`summary-value kpi-band-${teamMetrics.teamKPIBand.toLowerCase()}`}\n              title={`Off / Def / Core breakdown`}\n            >\n              {teamMetrics.teamKPI} ({teamMetrics.teamKPIBand}-Band)\n            </span>\n          </div>\n          <div className=\"summary-item\">\n            <span className=\"summary-label\">System Fit %:</span>\n            <span className=\"summary-value\">{teamMetrics.systemFit}%</span>\n          </div>\n          <div className=\"summary-item\">\n            <span className=\"summary-label\">Scholarship Usage:</span>\n            <span className=\"summary-value\">{teamMetrics.scholarshipSlots} / {coachingBias?.scholarshipCap || 12}</span>\n          </div>\n          <div className=\"summary-item\">\n            <span className=\"summary-label\">NIL Pool Utilized %:</span>\n            <span className=\"summary-value\">{teamMetrics.nilUtilized}%</span>\n          </div>\n          <div className=\"summary-item\">\n            <span className=\"summary-label\">Confidence Avg %:</span>\n            <span className=\"summary-value\">{teamMetrics.confidenceAvg}%</span>\n          </div>\n        </div>\n      </header>\n\n      {/* Content Area */}\n      <div className=\"team-iq-content\" key={activeView}>\n        {/* Roster View */}\n        {activeView === 'roster' && (\n          <div className=\"roster-view\">\n            <div className=\"roster-table-container\">\n              <table className=\"roster-table\">\n                <thead>\n                  <tr>\n                    <th className=\"sortable\" onClick={() => handleSort('name')}>\n                      Name {sortConfig.key === 'name' && (sortConfig.direction === 'asc' ? '↑' : '↓')}\n                    </th>\n                    <th>POS</th>\n                    <th>AGE</th>\n                    <th className=\"sortable\" onClick={() => handleSort('kpi')}>\n                      OVR (KPI) {sortConfig.key === 'kpi' && (sortConfig.direction === 'asc' ? '↑' : '↓')}\n                    </th>\n                    <th className=\"sortable\" onClick={() => handleSort('fit')}>\n                      FIT % {sortConfig.key === 'fit' && (sortConfig.direction === 'asc' ? '↑' : '↓')}\n                    </th>\n                    <th className=\"sortable\" onClick={() => handleSort('confidence')}>\n                      CONF % {sortConfig.key === 'confidence' && (sortConfig.direction === 'asc' ? '↑' : '↓')}\n                    </th>\n                    <th className=\"sortable\" onClick={() => handleSort('scholarship')}>\n                      SCH ALLOT {sortConfig.key === 'scholarship' && (sortConfig.direction === 'asc' ? '↑' : '↓')}\n                    </th>\n                    <th>NIL VALUE ($)</th>\n                    <th>ELIG.</th>\n                    <th>FLAGS</th>\n                    <th>ACTIONS</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {sortedRoster.map((player) => {\n                    const isSelected = selectedPlayer?.id === player.id;\n                    // Calculate scholarship slot (0.0-1.0) from dollar amount or use existing slot\n                    let scholarshipSlot = player.scholarship_slot;\n                    if (!scholarshipSlot && player.scholarship) {\n                      const scholarshipCap = coachingBias?.scholarshipCap || 12;\n                      const maxScholarship = scholarshipCap * 10000; // Max per player\n                      scholarshipSlot = Math.min(parseFloat(player.scholarship) / maxScholarship, 1.0);\n                    }\n                    scholarshipSlot = scholarshipSlot || 0;\n                    \n                    const isEditingScholarship = editingFinancial?.playerId === player.id && editingFinancial?.field === 'scholarship';\n                    const isEditingNIL = editingFinancial?.playerId === player.id && editingFinancial?.field === 'nil';\n                    \n                    return (\n                      <tr \n                        key={player.id} \n                        className={isSelected ? 'selected' : ''}\n                        onClick={() => setSelectedPlayer(player)}\n                      >\n                        <td className=\"player-name clickable\">{player.name}</td>\n                        <td>{player.position}</td>\n                        <td>{player.age || 'N/A'}</td>\n                        <td className=\"kpi-value\">{player.final_kpi || player.kpi || 0}</td>\n                        <td>{player.fit || 0}%</td>\n                        <td>{player.confidence || 0}%</td>\n                        <td \n                          className=\"financial-cell clickable\"\n                          onClick={(e) => handleFinancialClick(e, player, 'scholarship')}\n                          title=\"Click to edit\"\n                        >\n                          {isEditingScholarship ? (\n                            <div className=\"inline-edit\">\n                              <input\n                                type=\"number\"\n                                min=\"0\"\n                                max=\"1\"\n                                step=\"0.1\"\n                                value={tempFinancialValue}\n                                onChange={(e) => setTempFinancialValue(e.target.value)}\n                                onBlur={() => handleFinancialSave(player.id, 'scholarship')}\n                                onKeyPress={(e) => {\n                                  if (e.key === 'Enter') {\n                                    handleFinancialSave(player.id, 'scholarship');\n                                  } else if (e.key === 'Escape') {\n                                    handleFinancialCancel();\n                                  }\n                                }}\n                                autoFocus\n                                onClick={(e) => e.stopPropagation()}\n                              />\n                            </div>\n                          ) : (\n                            scholarshipSlot.toFixed(1)\n                          )}\n                        </td>\n                        <td \n                          className=\"financial-cell clickable\"\n                          onClick={(e) => handleFinancialClick(e, player, 'nil')}\n                          title=\"Click to edit\"\n                        >\n                          {isEditingNIL ? (\n                            <div className=\"inline-edit\">\n                              <input\n                                type=\"number\"\n                                min=\"0\"\n                                value={tempFinancialValue}\n                                onChange={(e) => setTempFinancialValue(e.target.value)}\n                                onBlur={() => handleFinancialSave(player.id, 'nil')}\n                                onKeyPress={(e) => {\n                                  if (e.key === 'Enter') {\n                                    handleFinancialSave(player.id, 'nil');\n                                  } else if (e.key === 'Escape') {\n                                    handleFinancialCancel();\n                                  }\n                                }}\n                                autoFocus\n                                onClick={(e) => e.stopPropagation()}\n                              />\n                            </div>\n                          ) : (\n                            `$${(player.nil_value_suggestion || player.nil || 0).toLocaleString()}`\n                          )}\n                        </td>\n                        <td>{player.eligibility || 'Active'}</td>\n                        <td>{player.flags && player.flags.length > 0 ? '⚠️' : '—'}</td>\n                        <td>\n                          <div className=\"action-menu\" onClick={(e) => e.stopPropagation()}>\n                          <button \n                            type=\"button\"\n                              className=\"action-btn-menu\"\n                              onClick={() => setSelectedPlayer(player)}\n                            >\n                              ⋮\n                          </button>\n                          </div>\n                        </td>\n                      </tr>\n                    );\n                  })}\n                  </tbody>\n                </table>\n\n                {/* Expanded Player View */}\n                {selectedPlayer && (\n                  <div className=\"player-detail-panel slide-down\">\n                    {/* Header Bar */}\n                    <div className=\"panel-header-bar\">\n                      <div className=\"player-header-info\">\n                        <div className=\"player-headshot\">\n                          {selectedPlayer.name.charAt(0)}\n                        </div>\n                        <div className=\"player-header-details\">\n                      <h3>{selectedPlayer.name}</h3>\n                          <div className=\"player-header-meta\">\n                            <span className=\"meta-item\">{selectedPlayer.position}</span>\n                            <span className=\"meta-divider\">·</span>\n                            <span className=\"meta-item\">Offensive Threat</span>\n                            <span className=\"meta-divider\">·</span>\n                            <span className=\"meta-item\">OVR {selectedPlayer.final_kpi || selectedPlayer.kpi || 0}</span>\n                            <span className=\"meta-divider\">|</span>\n                            <span className=\"meta-item\">Role: {selectedPlayer.roleProjection || (selectedPlayer.final_kpi > 80 ? 'Starter' : selectedPlayer.final_kpi > 70 ? 'Rotation' : 'Depth')}</span>\n                            <span className=\"meta-divider\">·</span>\n                            <span className=\"meta-item\">Fit {selectedPlayer.fit || 0}%</span>\n                    </div>\n                        </div>\n                      </div>\n                      <button className=\"panel-close\" onClick={() => setSelectedPlayer(null)}>×</button>\n                    </div>\n\n                    {/* Tabs */}\n                    <div className=\"panel-tabs\">\n                      <button \n                        className={expandedPlayerTab === 'kpi' ? 'active' : ''}\n                        onClick={() => setExpandedPlayerTab('kpi')}\n                      >\n                        KPI Profile\n                      </button>\n                      <button \n                        className={expandedPlayerTab === 'financial' ? 'active' : ''}\n                        onClick={() => setExpandedPlayerTab('financial')}\n                      >\n                        Financial Aid\n                      </button>\n                      <button \n                        className={expandedPlayerTab === 'performance' ? 'active' : ''}\n                        onClick={() => setExpandedPlayerTab('performance')}\n                      >\n                        Performance Log\n                      </button>\n                      <button \n                        className={expandedPlayerTab === 'notes' ? 'active' : ''}\n                        onClick={() => setExpandedPlayerTab('notes')}\n                      >\n                        Notes\n                      </button>\n                    </div>\n\n                    {/* Panel Content - 2 Column Grid */}\n                    <div className=\"panel-content-grid\">\n                      {/* Left Column - Metrics */}\n                      <div className=\"panel-column-left\">\n                      {expandedPlayerTab === 'kpi' && (\n                          <div className=\"kpi-profile-section\">\n                            <h4>Confidence Gate</h4>\n                            <div className=\"metric-group\">\n                              <div className=\"metric-item\">\n                                <label>Confidence %</label>\n                                <div className=\"metric-value\">{selectedPlayer.confidence || 0}%</div>\n                          </div>\n                              <div className=\"metric-item\">\n                                <label>Data Recency</label>\n                                <div className=\"metric-value\">Current Season</div>\n                          </div>\n                          </div>\n\n                            <h4>KPI Metrics</h4>\n                            <div className=\"metric-group\">\n                              <div className=\"metric-item\">\n                                <label>Overall KPI</label>\n                                <div className=\"metric-value gold\">{selectedPlayer.final_kpi || selectedPlayer.kpi || 0}</div>\n                          </div>\n                              <div className=\"metric-item\">\n                                <label>System Fit %</label>\n                                <div className=\"metric-value\">{selectedPlayer.fit || 0}%</div>\n                              </div>\n                              <div className=\"metric-item\">\n                                <label>Position</label>\n                                <div className=\"metric-value\">{selectedPlayer.position}</div>\n                              </div>\n                              <div className=\"metric-item\">\n                                <label>Archetype</label>\n                                <div className=\"metric-value\">Offensive Threat</div>\n                              </div>\n                            </div>\n\n                            <h4>Badges & Flags</h4>\n                            <div className=\"badges-section\">\n                              {selectedPlayer.badges?.map((badge, i) => (\n                                <span key={i} className=\"badge\">{badge}</span>\n                              ))}\n                              {selectedPlayer.flags?.length > 0 && (\n                                <div className=\"flags-section\">\n                                  {selectedPlayer.flags.map((flag, i) => (\n                                    <span key={i} className=\"flag\">⚠ {flag}</span>\n                                  ))}\n                        </div>\n                      )}\n                          </div>\n                          </div>\n                        )}\n\n                        {expandedPlayerTab === 'performance' && (\n                          <div className=\"performance-section\">\n                            <p className=\"empty-note\">Performance log will display game-by-game or season summary when connected to KaNeXT Stats.</p>\n                        </div>\n                      )}\n                      </div>\n\n                      {/* Right Column - Financial & Notes */}\n                      <div className=\"panel-column-right\">\n                        {expandedPlayerTab === 'financial' && (\n                          <div className=\"financial-section\">\n                            <h4>Scholarship Allocation</h4>\n                            <div className=\"form-group\">\n                              <label>Scholarship Slot (0.0 - 1.0)</label>\n                              <input\n                                type=\"number\"\n                                min=\"0\"\n                                max=\"1\"\n                                step=\"0.1\"\n                                value={selectedPlayer.scholarship_slot || (selectedPlayer.scholarship ? parseFloat(selectedPlayer.scholarship) / ((coachingBias?.scholarshipCap || 12) * 10000) : 0)}\n                                onChange={(e) => {\n                                  const slot = parseFloat(e.target.value) || 0;\n                                  setSelectedPlayer({\n                                    ...selectedPlayer,\n                                    scholarship_slot: Math.min(Math.max(slot, 0), 1.0),\n                                    scholarship: slot * (coachingBias?.scholarshipCap || 12) * 10000\n                                  });\n                                }}\n                              />\n                              <p className=\"form-note\">Current: {(selectedPlayer.scholarship_slot || 0).toFixed(1)} slot</p>\n                            </div>\n\n                            <h4>NIL Value</h4>\n                            <div className=\"form-group\">\n                              <label>NIL Value ($)</label>\n                              <input\n                                type=\"number\"\n                                min=\"0\"\n                                value={selectedPlayer.nil_value_suggestion || selectedPlayer.nil || 0}\n                                onChange={(e) => {\n                                  setSelectedPlayer({\n                                    ...selectedPlayer,\n                                    nil_value_suggestion: parseFloat(e.target.value) || 0,\n                                    nil: parseFloat(e.target.value) || 0\n                                  });\n                                }}\n                              />\n                              <p className=\"form-note\">Projected NIL valuation</p>\n                            </div>\n\n                            <h4>Funding Details</h4>\n                          <div className=\"detail-row\">\n                              <span className=\"label\">Funding Source:</span>\n                              <span className=\"value\">Scholarship + NIL</span>\n                            </div>\n                            <div className=\"detail-row\">\n                              <span className=\"label\">Last Updated:</span>\n                              <span className=\"value\">{selectedPlayer.timestamp ? new Date(selectedPlayer.timestamp).toLocaleDateString() : 'N/A'}</span>\n                          </div>\n                        </div>\n                      )}\n\n                      {expandedPlayerTab === 'notes' && (\n                          <div className=\"notes-section\">\n                          <textarea \n                            className=\"notes-input\"\n                            placeholder=\"Add notes about this player...\"\n                              value={selectedPlayer.notes || ''}\n                            onChange={(e) => {\n                              setSelectedPlayer({ ...selectedPlayer, notes: e.target.value });\n                            }}\n                          />\n                        </div>\n                      )}\n                    </div>\n                    </div>\n\n                    {/* Panel Actions */}\n                    <div className=\"panel-actions\">\n                      <button className=\"secondary-btn\" onClick={handleViewInPlayerIQ}>\n                        View in Player IQ™\n                      </button>\n                      <button className=\"secondary-btn\" onClick={handleSavePlayerChanges}>\n                        Save Changes\n                      </button>\n                      <button className=\"danger-btn\" onClick={handleRemoveToRecruiting}>\n                        Remove Player\n                      </button>\n                    </div>\n                  </div>\n                )}\n              </div>\n          </div>\n        )}\n\n        {/* Depth Chart View */}\n        {activeView === 'depth' && (\n          <div className=\"depth-chart-view\">\n            {/* Action Bar - Simulation & Roster Controls */}\n            <div className=\"depth-chart-action-bar\">\n              <button className=\"action-bar-btn\" onClick={handleEvaluateTeam}>\n                <span className=\"btn-icon\">📊</span>\n                <span className=\"btn-label\">Evaluate Team</span>\n              </button>\n              <button className=\"action-bar-btn\" onClick={handleRunPrediXt}>\n                <span className=\"btn-icon\">🧠</span>\n                <span className=\"btn-label\">Run PrediXt (Single Game)</span>\n              </button>\n              <button className=\"action-bar-btn\" onClick={handleRunSeasonProjection}>\n                <span className=\"btn-icon\">📊</span>\n                <span className=\"btn-label\">Run Season Projection (What-If)</span>\n              </button>\n              <button className=\"action-bar-btn primary\" onClick={handleApplyToRoster}>\n                <span className=\"btn-icon\">💾</span>\n                <span className=\"btn-label\">Apply to Roster</span>\n              </button>\n            </div>\n\n            {/* Depth Chart Canvas */}\n            <div className=\"depth-chart-canvas\">\n            <div className=\"depth-chart-grid\">\n                {['PG', 'CG', 'Wing', 'Forward', 'Big'].map(position => {\n                  const primaryPlayers = getPlayersForPosition(position);\n                  const benchPlayers = getBenchPlayers(position);\n                  const positionWeight = calculatePositionWeight(position, depthChartState);\n                  const isDragOver = dragOverPosition === position;\n                  \n                  return (\n                <div \n                  key={position} \n                      className={`position-column ${isDragOver ? 'drag-over' : ''}`}\n                      onDragOver={(e) => handleDragOver(e, position)}\n                      onDragLeave={handleDragLeave}\n                  onDrop={(e) => handleDrop(e, position)}\n                >\n                      <div className=\"position-header\">\n                        <span className=\"position-name\">{position}</span>\n                        {positionWeight > 0 && (\n                          <span className=\"weight-indicator\">{positionWeight.toFixed(0)}%</span>\n                        )}\n                      </div>\n                      \n                      {/* Primary Slots */}\n                      <div className=\"primary-slots\">\n                        {primaryPlayers.length > 0 ? (\n                          primaryPlayers.map((player, idx) => {\n                            const scholarshipSlot = player.scholarship_slot || (player.scholarship ? parseFloat(player.scholarship) / ((coachingBias?.scholarshipCap || 12) * 10000) : 0);\n                            return (\n                      <div \n                        key={player.id} \n                        className=\"player-card\"\n                        draggable\n                                onDragStart={(e) => handleDragStart(e, player, position)}\n                      >\n                        <div className=\"card-name\">{player.name}</div>\n                        <div className=\"card-stats\">\n                                  <span className=\"stat-item\">OVR: {player.final_kpi || player.kpi || 0}</span>\n                                  <span className=\"stat-item\">FIT: {player.fit || 0}%</span>\n                                  <span className=\"stat-item\">CONF: {player.confidence || 0}%</span>\n                        </div>\n                                <div className=\"card-meta\">\n                                  <span className=\"archetype\">Offensive Threat</span>\n                                  <span className=\"scholarship-slot\">Slot: {scholarshipSlot.toFixed(1)}</span>\n                      </div>\n                              </div>\n                            );\n                          })\n                        ) : (\n                      <div className=\"empty-slot\">Drop players here</div>\n                    )}\n                  </div>\n\n                      {/* Bench List */}\n                      {benchPlayers.length > 0 && (\n                        <div className=\"bench-section\">\n                          <div className=\"bench-header\">Bench ({benchPlayers.length})</div>\n                          <div className=\"bench-list\">\n                            {benchPlayers.map(player => (\n                              <div \n                                key={player.id} \n                                className=\"bench-player\"\n                                draggable\n                                onDragStart={(e) => handleDragStart(e, player, null)}\n                              >\n                                <span className=\"bench-name\">{player.name}</span>\n                                <span className=\"bench-fit\">{player.fit || 0}%</span>\n                </div>\n              ))}\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n\n            {/* Team Evaluation Report Side Panel */}\n            {showTeamEvaluation && (\n              <div className=\"team-evaluation-side-panel slide-in\">\n                <div className=\"evaluation-panel-header\">\n                  <h2>Team Evaluation Report</h2>\n                  <button className=\"panel-close\" onClick={() => setShowTeamEvaluation(false)}>×</button>\n                </div>\n                \n                {(() => {\n                  const report = generateTeamReport();\n                  return (\n                    <div className=\"evaluation-panel-content\">\n                      {/* Header Info */}\n                      <div className=\"report-header-info\">\n                        <div className=\"report-field\">\n                          <label>Team:</label>\n                          <span>{coachProfile?.team || 'Not Set'}</span>\n                        </div>\n                        <div className=\"report-field\">\n                          <label>Division:</label>\n                          <span>{report.division}</span>\n                        </div>\n                        <div className=\"report-field\">\n                          <label>System:</label>\n                          <span>{coachingBias?.offensiveSystem || 'Not Set'} / {coachingBias?.defensiveSystem || 'Not Set'}</span>\n                        </div>\n                        <div className=\"report-field\">\n                          <label>Team KPI:</label>\n                          <span className=\"kpi-value\">{report.teamKPI}</span>\n                        </div>\n                        <div className=\"report-field\">\n                          <label>Fit %:</label>\n                          <span>{report.fitPercent}%</span>\n                        </div>\n                        <div className=\"report-field\">\n                          <label>Confidence Avg:</label>\n                          <span>{report.confidenceAvg}%</span>\n                        </div>\n                      </div>\n\n                      {/* Summary */}\n                      <div className=\"report-section\">\n                        <h3>Summary</h3>\n                        <p className=\"report-summary\">{report.summary}</p>\n                      </div>\n\n                      {/* Coach K Comment */}\n                      <div className=\"report-section coach-k-comment\">\n                        <h3>Coach K™ Comment</h3>\n                        <p className=\"coach-k-text\">{report.coachKComment}</p>\n                      </div>\n\n                      {/* Improvement Path */}\n                      <div className=\"report-section\">\n                        <h3>Improvement Path</h3>\n                        <p className=\"improvement-path\">{report.improvementPath}</p>\n                      </div>\n\n                      {/* Resources */}\n                      <div className=\"report-section\">\n                        <h3>Resources</h3>\n                        <div className=\"resources-list\">\n                          <span className=\"resource-item\">{report.resources.scholarshipSlots}</span>\n                          <span className=\"resource-item\">{report.resources.budget}</span>\n                          <span className=\"resource-item\">{report.resources.nilUnused}</span>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })()}\n\n                {/* Footer Actions */}\n                <div className=\"evaluation-panel-footer\">\n                  <button className=\"secondary-btn\" onClick={handleShowMatchingRecruits}>\n                    Show Matching Recruits\n                  </button>\n                  <button className=\"primary-btn\" onClick={handleSaveReport}>\n                    Save Report\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      <CoachingIQDrawer \n        isOpen={showDrawer} \n        onClose={() => setShowDrawer(false)} \n      />\n\n      {/* Coach K™ Reaction Panel */}\n      <CoachKReactionPanel\n        teamMetrics={teamMetrics}\n        sandboxMetrics={sandboxMetrics}\n        depthChartState={depthChartState}\n        coachingBias={coachingBias}\n        coachProfile={coachProfile}\n      />\n\n      {/* Add from Recruiting Board Modal */}\n      {showRecruitingModal && (\n        <div className=\"recruiting-modal-overlay\" onClick={() => setShowRecruitingModal(false)}>\n          <div className=\"recruiting-modal\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h2>Add from Recruiting Board</h2>\n              <button className=\"modal-close\" onClick={() => setShowRecruitingModal(false)}>×</button>\n            </div>\n            <div className=\"modal-content\">\n              <p className=\"modal-note\">Select evaluated recruits (Confidence ≥ 60) to add to your roster.</p>\n              {/* TODO: Fetch from Recruiting IQ verified list */}\n              <div className=\"recruits-list\">\n                <p className=\"empty-note\">No qualified recruits available. Evaluate players in Recruiting IQ™ first.</p>\n              </div>\n            </div>\n            <div className=\"modal-actions\">\n              <button className=\"secondary-btn\" onClick={() => setShowRecruitingModal(false)}>\n                Cancel\n              </button>\n              <button className=\"primary-btn\" disabled>\n                Add Selected\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TeamIQPage;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}